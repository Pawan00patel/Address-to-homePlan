from bs4 import BeautifulSoup
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# Define the path to the Firefox WebDriver executable
firefox_driver_path = r"C:\Users\Pawan\Downloads\geckodriver-v0.33.0-win64\geckodriver.exe"  # Replace with the actual path

# Define the inner HTML content you want to parse
inner_html = """ <div class="topBarMain" style="display: initial;"><div class="slider-top-bar"><div class="topTitle"><span class="leftArrow"></span><span>1 BHK  597 Sq-ft  Flat  For Sale  in Chandapura, Bangalore</span></div><div class="btnsGroup"><li class="shareIcon"></li></div></div></div><div class="clearfix"></div><div class="imgTiles "><div class="imageTilesLeft" style="display: initial;"><ul class="masonryGrid"><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-1-Signature-Splendor-Bangalore-5332907_345_1366_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-8-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-9-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-10-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-11-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-12-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-13-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-14-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-15-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-16-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-17-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-18-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-19-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-20-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-21-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-22-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-23-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-24-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-25-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-26-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-27-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-28-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-29-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Project-Photo-30-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Location-Plan-32-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Master-Plan-31-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-2-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>1 BHK Multistorey Apartment 597 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-3-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>1 BHK Multistorey Apartment 707 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-4-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>2 BHK Multistorey Apartment 922 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-5-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>3 BHK Multistorey Apartment 994 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-6-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>2 BHK Multistorey Apartment 1035 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2022/06/27/Floor-Plan-7-Signature-Splendor-Bangalore-5332907_1200_1600_0_320.jpg"><span>3 BHK Multistorey Apartment 1162 Sq-ft (Active)</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/01/02/null-36-Signature-Splendor-Bangalore-5332907_470_689_0_320.jpg"><span>Netted Cricket Pitch</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Web-40-Signature-Splendor-Bangalore-5332907_470_689_0_320.jpg"><span>Blue Turf Badminton Court</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Web-42-Signature-Splendor-Bangalore-5332907_470_689_0_320.jpg"><span>Rooftop Party Zone</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Web-44-Signature-Splendor-Bangalore-5332907_470_689_0_320.jpg"><span>Outdoor Gym for Fitness</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/01/02/null-35-Signature-Splendor-Bangalore-5332907_380_324_0_320.jpg"><span>Netted Cricket Pitch</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Mob-39-Signature-Splendor-Bangalore-5332907_380_324_0_320.jpg"><span>Blue Turf Badminton Court</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Mob-41-Signature-Splendor-Bangalore-5332907_380_324_0_320.jpg"><span>Rooftop Party Zone</span></li><li><img src="https://img.staticmb.com/mbimages/project/Photo_h0_w320/2023/04/16/USP-Mob-43-Signature-Splendor-Bangalore-5332907_380_324_0_320.jpg"><span>Outdoor Gym for Fitness</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_T-S-Royal-Grand-Hotel-1_0_320.jpg"><span>Hotel</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Crown-Orchid2_0_320.jpg"><span>Hotel</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Best-Hospital1_0_320.jpg"><span>Hospital</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Athreya-Hospital2_0_320.jpg"><span>Hospital</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Athreya-Hospital1_0_320.jpg"><span>Hospital</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Surana-Vidyalaya1_0_320.jpg"><span>School</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Nazareth-School-3_0_320.jpg"><span>School</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2022/Jan/22/Photo_h0_w320/80398_Nazareth-School2_0_320.jpg"><span>School</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Overview_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Garbage-Dump_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Residential_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Lighting_0_320.jpg"></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_View-of-Road_0_320.jpg"><span>Streets and Roads</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Retail_0_320.jpg"><span>Retail</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Religious-Place_0_320.jpg"><span>Religious Places</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Park_0_320.jpg"><span>Parks</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Hotel_0_320.jpg"><span>Hotels &amp; Restaurant</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Hospital_0_320.jpg"><span>Hospitals</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Dec/24/Photo_h0_w320/80398_MAP_0_320.png"><span>Locality Map</span></li><li><img src="https://img.staticmb.com/mbphoto/locality/cropped_images/2021/Jun/4/Photo_h0_w320/80398_Parking_0_320.jpg"><span>Parking</span></li></ul></div></div>"""

# Define the URL of the webpage you want to open
url = "https://www.magicbricks.com/propertyDetails/1-BHK-597-Sq-ft-Multistorey-Apartment-FOR-Sale-Chandapura-in-Bangalore&id=4d423635323634333033"  # Replace with your URL

# Create Firefox WebDriver options
options = webdriver.FirefoxOptions()

# Specify the Firefox WebDriver executable path and options
driver = webdriver.Firefox(options=options)
driver.maximize_window()

try:
    # Load the provided URL using the WebDriver
    driver.get(url)

    # Wait for the page to load completely (you may need to adjust the wait time)
    wait = WebDriverWait(driver, 10)
    wait.until(EC.presence_of_element_located((By.XPATH, "//body")))

    # Parse the provided inner HTML content using BeautifulSoup
    soup = BeautifulSoup(inner_html, 'html.parser')

    # Find all <li> tags within the parsed HTML
    li_tags = soup.find_all('li')

    # Loop through the <li> tags and find the 'src' attribute of the imagesxkxs
    for li_tag in li_tags:
        image_tag = li_tag.find('img')
        if image_tag and 'src' in image_tag.attrs:
            img_src = image_tag['src']
            if 'floor-plan' in img_src.lower():
            # Download or scrape the image with 'home plan' keyword in its src
                print("Downloading image with 'floor-plan' keyword:", img_src)
            # You can add your code to download or scrape the image here
            else:
                print("Skipping image without 'home plan' keyword:", img_src)
        else:
            print("Image src not found in this <li> tag")

except Exception as e:
    print("Error:", e)

finally:
    # Quit the WebDriver
    driver.quit()